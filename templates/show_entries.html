{% extends "layout.html" %}
{% block body %}
{% if session.logged_in %}
<script type="text/javascript">
  function edit(id) {
  var password = prompt("password")
  document.getElementById("entryPassword1").value = password
  }
  function del(id) {
  var password = prompt("password")
  document.getElementById("entryPassword2").value = password
  }
  function cDel(id) {
  var password = prompt("password")
  document.getElementById(id).value = password
  }
</script>
<ul class=entries>
  {% for entry in entries %}
  <dl><form action="{{ url_for('edit_entry',id=entry.id) }}" method=post class=edit-entry>
	  <dt>Title:</dt>
	  <dd><input type=text name=title value={{ entry.title }}></dd>
	  <dt>Text:</dt>
	  <dd><input type=text name=text value={{ entry.text|safe }}></dd>
	  <dt><input type=hidden name=entryPassword1 id=entryPassword1></dt>
	  <input type=submit value=Edit onclick='edit({{ entry.id }})'>
	</form></dl>
  <form action="{{ url_for('del_entry', id=entry.id) }}" method=post class=del-entry>
	<input type=hidden name=entryPassword2 id=entryPassword2>
	<input type=submit value=Delete onclick='del({{ entry.id }})'>
  </form>
	{% for content in contents %}
	<dl><form action="{{ url_for('del_comment', id=entry.id, id2=content.id) }}" method=post class=del-comment>
		<dt>Author: {{ content.author }}</dt>
		<dt>Comment: {{ content.comment }}
		  <input type=hidden name=delCommentPassword id={{ content.id }}>
		  <input type=submit value=Delete onclick='cDel({{ content.id }})'></dt></dl></form>
	{% endfor %}
  <dl><form action="{{ url_for('add_comment', id=entry.id) }}" method=post class=add-comment>
	  <dt>Author: </dt>
	  <dd><input type=text size=10 name=author></dd>
	  <dt>Comment: </dt>
	  <dd><textarea name=comment rows=3 cols=20></textarea></dd>
	  <dt>Password: <input type=text size=5 name=addCommentPassword></dt>
	  <dd><input type=submit value=Share></dd>
  </dl> 
  </form>
  {% else %}
  <li><em>Unbelievable. No entries here so far</em></li>
  {% endfor %}
</ul>
{% else %}
you must login first
{% endif %}
{% endblock %}
